platform: linux
image_resource:
  type: registry-image
  source:
    repository: dtzar/helm-kubectl
    tag: 3.3.1
inputs:
  - name: repository
run:
  path: bash
  args:
    - -c
    - |
      set -e

      echo Linting...
      helm lint ((chart-path))

      echo Validating resources with default values...
      helm template release-name ((chart-path)) \
        | kubectl apply -f - --dry-run

      echo 'Success!'
